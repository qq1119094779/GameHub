<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>发布</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <link type="text/css" rel="stylesheet" href="css/custom-ui.css">
    <link type="text/css" rel="stylesheet" href="css/select2.css">
    <link type="text/css" rel="stylesheet" href="css/flat/red.css">
    <link type="text/css" rel="stylesheet" href="css/style.css">
    <link type="text/css" rel="stylesheet" href="iconfont/iconfont.css">
    <script type="text/javascript" src="js/jquery1.91.min.js"></script>
    <script type="text/javascript" src="js/select2.min.js"></script>
    <script type="text/javascript" src="js/jquery.SuperSlide.2.1.js"></script>
    <script type="text/javascript" src="js/icheck.min.js"></script>
    <script type="text/javascript" src="js/common.js"></script>
    <style type="text/css">
        #head{ background: #fff; }
        .nav_shu .nLi h3 a { color: #333; }
        .nav_shu .nLi h3 a:hover span, .nav_shu .nLi.on h3 a span, .submenu .subnav a span, .submenu .subnav a:hover span { color: #333; border-color: #333; }
        #head .login_status li a { color: #333; }
    </style>
</head>
<body>
<!--[if lte IE 8]>
<div class="ie7_hints">温馨提示：您所使用的浏览器版本过低，为保证账户安全和浏览体验建议升级为最新版本浏览器</div>
<![endif]-->
<!--头部start-->
<div class="ease-3" id="head">
    <div class="nr w1200 clearfix mar0">
        <div class="fl"><a class="logo" href="index.html" title=""><img src="images/logo02.png" alt="" /></a></div>
        <div class="fl">
            <div class="navbox">
                <ul class="clearfix nav_shu">
                    <li class="nLi on"><h3><a class="ease-1" href="index.html"><span>探索游戏</span></a></h3>
                    </li>
                    <li class="nLi"><h3><a class="ease-1" href="found_friend.html"><span>发现朋友</span></a></h3>
                    </li>
                    <li class="nLi"><h3><a class="ease-1" href="javascript:;"><span>客服</span></a></h3>
                    </li>
                    </li>
                </ul>
            </div>
        </div>
        <div class="head-right clearfix fr">
            <div class="searchbox fl">
                <form method="post">
                    <input type="text" class="input_text search_input ease-3 radius-5" placeholder="有没有弱提示" />
                    <button class="search_submit ease-3">搜索</button>
                </form>
            </div>
            <ul class="login_status fr clearfix">
                <!--登录前的状态-->
                <li class="top_item top_item_login"><a href="login.html" class="link-a">登录</a></li>
                <li class="top_item top_item_login"><a href="###" class="link-a">/</a></li>
                <li class="top_item top_item_login"><a href="register.html" class="link-a txt-peach">注册</a></li>
            </ul>
        </div>
    </div>
</div>
<!--头部end-->

<div class="mainbody w1200 mar0 page_editor">
    <div class="nr">
        <div class="item">
            <div class="item_from mb20 clearfix">
                <label class="atr fl mr20 txt-333">姓名:</label>
                <p class="fl">666666</p>
            </div>
            <div class="item_from mb20 clearfix">
                <p class="atr mb5 mr20 txt-333 fl" style="height:38px;line-height:38px;">分类:</p>
                <div class="radio_box fl" style="max-width:430px;">
                    <ul class="clearfix">
                        <li>
                            <input type="radio" name="hobby" value="策划" checked="checked" />
                            <a href="javascript:void(0);" class="radio_item radius-5 ease-1 txt-666"><i class="icon inlineblock man"></i><span>RPG</span></a>
                        </li>
                        <li>
                            <input type="radio" name="hobby" value="程序" />
                            <a href="javascript:void(0);" class="radio_item radius-5 ease-1 txt-666"><i class="icon inlineblock man"></i><span>冒险</span></a>
                        </li>
                        <li>
                            <input type="radio" name="hobby" value="美术" />
                            <a href="javascript:void(0);" class="radio_item radius-5 ease-1 txt-666"><i class="icon inlineblock man"></i><span>剧情</span></a>
                        </li>
                        <li>
                            <input type="radio" name="hobby" value="音乐" />
                            <a href="javascript:void(0);" class="radio_item radius-5 ease-1 txt-666"><i class="icon inlineblock man"></i><span>动作</span></a>
                        </li>
                        <li>
                            <input type="radio" name="hobby" value="音乐" />
                            <a href="javascript:void(0);" class="radio_item radius-5 ease-1 txt-666"><i class="icon inlineblock man"></i><span>RPG</span></a>
                        </li>
                        <li>
                            <input type="radio" name="hobby" value="音乐" />
                            <a href="javascript:void(0);" class="radio_item radius-5 ease-1 txt-666"><i class="icon inlineblock man"></i><span>RPG</span></a>
                        </li>
                        <li>
                            <input type="radio" name="hobby" value="音乐" />
                            <a href="javascript:void(0);" class="radio_item radius-5 ease-1 txt-666"><i class="icon inlineblock man"></i><span>RPG</span></a>
                        </li>
                        <li>
                            <input type="radio" name="hobby" value="音乐" />
                            <a href="javascript:void(0);" class="radio_item radius-5 ease-1 txt-666"><i class="icon inlineblock man"></i><span>RPG</span></a>
                        </li>
                        <li>
                            <input type="radio" name="hobby" value="音乐" />
                            <a href="javascript:void(0);" class="radio_item radius-5 ease-1 txt-666"><i class="icon inlineblock man"></i><span>RPG</span></a>
                        </li>
                        <li>
                            <input type="radio" name="hobby" value="音乐" />
                            <a href="javascript:void(0);" class="radio_item radius-5 ease-1 txt-666"><i class="icon inlineblock man"></i><span>RPG</span></a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="item_from mb20 clearfix">
                <p class="atr fl mr20 txt-333">截图:</p>
                <div class="fl">
                    <div class="upload_img_wrap">
                <div id="imgBox"></div>
                <img class="upload_img" data-id="1" src="images/upload_img.jpg" />
                <img style="display:none" class="upload_img" data-id="2" src="images/upload_img.jpg" />
                <img style="display:none" class="upload_img" data-id="3" src="images/upload_img.jpg" />
                <img style="display:none" class="upload_img" data-id="4" src="images/upload_img.jpg" />
                <img style="display:none" class="upload_img" data-id="5" src="images/upload_img.jpg" />
                <img style="display:none" class="upload_img" data-id="6" src="images/upload_img.jpg" />
            </div>
            <div style="display: none;width: 100%;height: 100vh;position: relative;">
                <form id="upBox" class="upload_form" action="" method="post" enctype="multipart/form-data">
                    <div style="display: none;" id="inputBox">
                        <input type="file" name="image[]" data-id="1" title="请选择图片" id="file1" accept="images/png,images/jpg,images/gif,images/JPEG" />
                        <input type="file" name="image[]" data-id="2" title="请选择图片" id="file2" accept="images/png,images/jpg,images/gif,images/JPEG" />
                        <input type="file" name="image[]" data-id="3" title="请选择图片" id="file3" accept="images/png,images/jpg,images/gif,images/JPEG" />
                        <input type="file" name="image[]" data-id="4" title="请选择图片" id="file4" accept="images/png,images/jpg,images/gif,images/JPEG" />
                        <input type="file" name="image[]" data-id="5" title="请选择图片" id="file5" accept="images/png,images/jpg,images/gif,images/JPEG" />
                        <input type="file" name="image[]" data-id="6" title="请选择图片" id="file6" accept="images/png,images/jpg,images/gif,images/JPEG" />
                    </div>
                    <input style="display:none" type="submit" id="sub" />
                </form>
            </div>
                </div>
            </div>
            <div class="item_from mb20 clearfix">
                <p class="atr fl mr20 txt-333">简介:</p>
                <div class="fl">
                    <textarea class="input_text radius-5 mb10 mr10" style="resize:none;width:500px;" placeholder="200字以内" name="content" ></textarea>
                </div>
                <span class="edit_txt fl txt-blue">编辑</span>
            </div>
            <div class="item_from mb20 clearfix">
                <p class="atr mr20 txt-333 mb10">详细介绍:</p>
                <textarea class="input_text radius-5 mb10 mr10" style="resize:none;width:500px;margin-left:60px;" placeholder="200字以内" name="content" ></textarea>
                <span class="edit_txt txt-blue">编辑</span>
            </div>
            <div class="item_from mb20 clearfix">
                <p class="atr mr20 txt-333">特殊说明:</p>
                <textarea class="input_text radius-5 mb10 mr10" style="resize:none;width:500px;margin-left:60px;" placeholder="必须填" name="content" ></textarea>
                <span class="edit_txt txt-blue">编辑</span>
            </div>
            <div class="item_from mb20 clearfix">
                <p class="atr mr20 txt-333 mb10">版本信息:</p>
                <div class="mb10" style="margin-left:60px;">
                    <input type="text" class="input_text radius-2 txt-aaa" placeholder="" style="width:84px;" value="版本号">
                </div>
                <textarea class="input_text radius-5 mb10 mr10" style="resize:none;width:500px;margin-left:60px;" placeholder="版本说明" name="content" ></textarea>
                <span class="edit_txt txt-blue">编辑</span>
                <a href="###" class="btn_add txt-blue"><i class="iconfont mr5 fs14">&#xe652;</i>添加版本信息</a>
            </div>
            <div class="item_from mb20 clearfix">
                <p class="atr mr20 mb10 txt-333">发布名义:</p>
                <div style="padding-left:60px;">
                    <select class="selectbox mr10" datatype="*" style="width:100px;">
                        <option value="1">个人</option>
                        <option value="1.01">团队</option>
                    </select>
                    <select class="selectbox" datatype="*" style="width:100px;">
                        <option value="1">1人</option>
                        <option value="1.01">2人</option>
                        <option value="1.02">3人</option>
                    </select>
                </div>
            </div>
            <div class="item_from mb20 clearfix">
                <p class="atr mr20 mb10">游戏上传:</p>
                <div class="change_avatar" style="margin-left:60px;">
                    <div class="pic pic02"><img id="imgHeadPhoto_2" src="images/avatar.jpg"><a href="###" class="ease-3 txt-blue">选择文件<input type="file" filenum="2"></a></div>
                </div>
            </div>
        </div>
    </div>
    <button class="btn_submit btn_blue btn_small radius-5 ease-1" type="submit" style="width:110px;margin-top:25px;margin-left:300px;">发布</button>
</div>
<script type="text/javascript" src="js/LocalResizeIMG.js"></script>
<script type="text/javascript" src="js/patch/mobileBUGFix.mini.js"></script>
<script type="text/javascript">
/*头像上传*/
$('input:file').click(function(){
    var num = $(this).attr('filenum');
    var nextnum = parseInt(num) +1;
    $(this).localResizeIMG({
        width: 100,
        quality:1,
        success:function(result){
            var img = new Image();
            img.src = result.base64;
            $('#imgHeadPhoto_'+num).attr('src',img.src);
            console.log(result);
        }
    })
})
/*头像上传*/
$('input:file').click(function(){
    var num = $(this).attr('filenum');
    var nextnum = parseInt(num) +2;
    $(this).localResizeIMG({
        width: 100,
        quality:1,
        success:function(result){
            var img = new Image();
            img.src = result.base64;
            $('#imgHeadPhoto_'+num).attr('src',img.src);
            console.log(result);
        }
    })
})
</script>

<script type="text/javascript">
/*单选js*/
$(function(){
    $('.radio_box input').each(function(){
        if($(this).attr('checked')){
            $(this).next().addClass('current');
        }
    })
    $('.radio_box .radio_item').click(function(){
        if($(this).hasClass('open')){
            $('#'+$(this).attr('open1')).show();
            $('#'+$(this).attr('open2')).show();
        }else{
            $('#'+$(this).attr('open1')).hide();
            $('#'+$(this).attr('open2')).hide();
        }
        $(this).prev().trigger('click');
        $(this).parent().parent().find('.radio_item').removeClass('current');
        $(this).addClass('current');
        return false;
    });
});

</script>
<script type="text/javascript">
    $(function(){
        /*icheck js*/
        $('input.icheck').iCheck({
            checkboxClass: 'icheckbox_flat-red',
            radioClass: 'iradio_flat-red'
        });
    })
</script>
<script>

    var imgNum = 0;
    $(".upload_img_wrap .upload_img").bind("click", function(ev) {
        //console.log(ev.currentTarget.dataset.id)
        var index = ev.currentTarget.dataset.id;
        var that = this;
        if(index == 1) {
            $("#file1").click();
            $("#file1").unbind().change(function(e) {
                var index = e.currentTarget.dataset.id;
                if($('#file').val() == '') {
                    return false;
                }
                $(that).hide();
                var filePath = $(this).val();
                changeImg(e, filePath, index);

                imgNum++;
                if(imgNum<6){
                    $(".upload_img").eq(1).show();
                }
            })
        } else if(index == 2) {
            $("#file2").click();
            $("#file2").unbind().change(function(e) {
                var index = e.currentTarget.dataset.id;
                if($('#file').val() == '') {
                    return false;
                }
                $(that).hide();
                var filePath = $(this).val();
                changeImg(e, filePath, index);

                imgNum++;
                if(imgNum<6){
                    $(".upload_img").eq(2).show();
                }
            })
        } else if(index == 3) {
            $("#file2").click();
            $("#file2").unbind().change(function(e) {
                var index = e.currentTarget.dataset.id;
                if($('#file').val() == '') {
                    return false;
                }
                $(that).hide();
                var filePath = $(this).val();
                changeImg(e, filePath, index);

                imgNum++;
                if(imgNum<6){
                    $(".upload_img").eq(3).show();
                }
            })
        } else if(index == 4) {
            $("#file2").click();
            $("#file2").unbind().change(function(e) {
                var index = e.currentTarget.dataset.id;
                if($('#file').val() == '') {
                    return false;
                }
                $(that).hide();
                var filePath = $(this).val();
                changeImg(e, filePath, index);

                imgNum++;
                if(imgNum<6){
                    $(".upload_img").eq(4).show();
                }
            })
        } else if(index == 5) {
            $("#file2").click();
            $("#file2").unbind().change(function(e) {
                var index = e.currentTarget.dataset.id;
                if($('#file').val() == '') {
                    return false;
                }
                $(that).hide();
                var filePath = $(this).val();
                changeImg(e, filePath, index);

                imgNum++;
                if(imgNum<6){
                    $(".upload_img").eq(5).show();
                }
            })
        } else if(index == 6) {
            $("#file3").click();
            $("#file3").unbind().change(function(e) {
                var index = e.currentTarget.dataset.id;
                if($('#file').val() == '') {
                    return false;
                }
                var filePath = $(this).val();
                changeImg(e, filePath, index);
                $(that).hide();
            })
        }
    })

    function changeImg(e, filePath, index) {
        fileFormat = filePath.substring(filePath.lastIndexOf(".")).toLowerCase();
        //检查后缀名
        if(!fileFormat.match(/.png|.jpg|.jpeg/)) {
            showError('文件格式必须为：png/jpg/jpeg');
            return;
        }
        //获取并记录图片的base64编码
        var reader = new FileReader();
        reader.readAsDataURL(e.target.files[0]);
        reader.onloadend = function() {
            // 图片的 base64 格式, 可以直接当成 img 的 src 属性值
            var dataURL = reader.result;
            // console.log(dataURL)
            // 显示图片
            $("#imgBox").html($("#imgBox").html() + '<div class="imgContainer" data-index=' + index + '><img   src=' + dataURL + '><img onclick="removeImg(this,' + index + ')"  class="imgDelete" src="images/del_img.png" /></div>');
        };

    }

    function removeImg(obj, index) {
        for(var i = 0; i < $(".imgContainer").length; i++) {
            if($(".imgContainer").eq(i).attr("data-index") == index) {
                $(".imgContainer").eq(i).remove();
            }
        }
        for(var i = 0; i < $(".upload_img").length; i++) {
            $(".upload_img").eq(i).hide();
            if($(".upload_img").eq(i).attr("data-id") == index) {
                console.log($(".upload_img").eq(i).attr("data-id"))
                $(".upload_img").eq(i).show();
            }
        }
    }

</script>
</body>
</html>
